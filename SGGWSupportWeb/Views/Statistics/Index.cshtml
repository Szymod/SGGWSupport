@model IEnumerable<SGGWSupportWeb.Models.StatiscticsModel>

@{
    ViewBag.Title = "Statistics";
}
<meta http-equiv="content-type" content="text/plain; charset=UTF-8" />
<body onload="loadStatistics()">
    <dl class="dl-horizontal">
        <dt><em>Enter Username:</em></dt>
        <dd>
            <input type="text" title="Input username to search for..." id="usernameFilter">
            <button class="btn ticket-btn btn-primary" onclick="loadStatistics()">Filter</button>
            <button class="btn ticket-btn btn-primary" onclick="resetFilter()">Reset</button>
            <button class="btn ticket-btn btn-primary" onclick="exportToXLS()">Export to XLS</button>
        </dd>
    </dl> 
      
    <p><em>Assigned incident from last 7 days:</em></p>
    <div id="partialStatictics">
    </div>
    <br/>

    <p><em>Assigned incident older last 7 days:</em></p>
    <div id="partialStatictics2">
    </div>
    <br />

    <p><em>Resolved incident from last 7 days:</em></p>
    <div id="partialStatictics3">
    </div>
    <br />

    <p><em>Resolved incident older last 7 days:</em></p>
    <div id="partialStatictics4">
    </div>

    <style>

    </style>
    <script type="text/javascript">

        $(function () {
            loadStatistics();
        });
        function exportToXLS() {

        }

        function resetFilter() {
            $('#usernameFilter').val('');
            loadStatistics();
        }

        function loadStatistics() {
            $.ajax({
                url: ('@(Url.Action("_Statistics","Statistics",null,Request.Url.Scheme))?username=' + $('#usernameFilter').val() + '&filterType=1'), // /
                datatype: "html",
                type: "POST",
                beforeSend: function () {
                    document.getElementById('partialStatictics').setAttribute("align", "center");
                    $('#partialStatictics').html('<image src="/Content/Loading.gif" alt="Loading, please wait"/>');
                },
                success: function (data) {
                    document.getElementById('partialStatictics').removeAttribute("align");
                    $('#partialStatictics').html(data);
                },
                error: function () {
                    document.getElementById('partialStatictics').removeAttribute("align");
                    $('#partialStatictics').html("ERROR");
                }
            });

            $.ajax({
                url: ('@(Url.Action("_Statistics","Statistics",null,Request.Url.Scheme))?username=' + $('#usernameFilter').val() + '&filterType=2'), // /
                datatype: "html",
                type: "POST",
                beforeSend: function () {
                    document.getElementById('partialStatictics2').setAttribute("align", "center");
                    $('#partialStatictics2').html('<image src="/Content/Loading.gif" alt="Loading, please wait"/>');
                },
                success: function (data) {
                    document.getElementById('partialStatictics2').removeAttribute("align");
                    $('#partialStatictics2').html(data);
                },
                error: function () {
                    document.getElementById('partialStatictics2').removeAttribute("align");
                    $('#partialStatictics2').html("ERROR");
                }
            });

            $.ajax({
                url: ('@(Url.Action("_Statistics","Statistics",null,Request.Url.Scheme))?username=' + $('#usernameFilter').val() + '&filterType=3'), // /
                datatype: "html",
                type: "POST",
                beforeSend: function () {
                    document.getElementById('partialStatictics3').setAttribute("align", "center");
                    $('#partialStatictics3').html('<image src="/Content/Loading.gif" alt="Loading, please wait"/>');
                },
                success: function (data) {
                    document.getElementById('partialStatictics3').removeAttribute("align");
                    $('#partialStatictics3').html(data);
                },
                error: function () {
                    document.getElementById('partialStatictics3').removeAttribute("align");
                    $('#partialStatictics3').html("ERROR");
                }
            });

            $.ajax({
                url: ('@(Url.Action("_Statistics","Statistics",null,Request.Url.Scheme))?username=' + $('#usernameFilter').val() + '&filterType=4'), // /
                datatype: "html",
                type: "POST",
                beforeSend: function () {
                    document.getElementById('partialStatictics4').setAttribute("align", "center");
                    $('#partialStatictics4').html('<image src="/Content/Loading.gif" alt="Loading, please wait"/>');
                },
                success: function (data) {
                    document.getElementById('partialStatictics4').removeAttribute("align");
                    $('#partialStatictics4').html(data);
                },
                error: function () {
                    document.getElementById('partialStatictics4').removeAttribute("align");
                    $('#partialStatictics4').html("ERROR");
                }
            });

        }
    </script>
</body>

